# 1-1. Pythonの基本文法

## コメント

プログラムの動作に関係ないけれど、メモ書きをしたい場合は `#` を使います。LaTeXでいう `%` と同じ働きをします。

```python
# これを動かしても何も起こりません
```


## 単純な型

Python で取り扱うもの（数値や文字列など）はそれぞれ **型** を持っています

- 整数型 **int**
    - `1`, `2`, `3`, `0`, `-1`, `-2`, ... 
- 浮動小数点数 **float**
    - `0.01`, `3.14159`, `-0.1`, ... 
- 文字列 **str**
    - `'` か `"` で文字列を挟む
    - `'this is a pen.'`, `'12345'`, ... 
    - `"this is a pen."`, `"12345"`, ... 

などです。型は `type()` 関数で確認することができます。

- 整数型の例
    ```python
    type(1)
    ```
    > ```
    > int
    > ```
- 浮動小数点数の例
    ```python
    type(1.41421356)
    ```
    > ```
    > float
    > ```
- 文字列の例
    ```python
    type('string')
    ```
    > ```
    > str
    > ```

### それぞれの演算

それぞれの型で演算が定義されています。

- 数値型の演算
    - 四則演算：
        ```python
        1 + 2 - 3*4/5   # 掛け算は *、割り算は / です。
        ```
        > ```
        > 0.6000000000000001
        > ```
    - 冪乗 $a^b$ は `a**b` です
        ```python
        3**2
        ```
        > ```
        > 9
        > ```

- 整数型どうしの特殊な割り算：
    - 余りを除いた割り算
        ```python
        10//3 
        ```
        > ```
        > 3
        > ```
    - 余り
        ```python
        10%3   
        ```
        > ```
        > 1
        > ```

- 文字列の演算：
    - 文字列型の足し算：
        ```python
        "this" + " " + "is" + " " + "a" + " " + "pen"  # " " を足しているのは空白を作るためです。
        ```
        > ```
        > 'this is a pen'
        > ```
    - 文字列型の掛け算というのもあります：
        ```python
        "String"*2
        ```
        > ```
        > 'StringString'
        > ```

### 変数化

変数の宣言は
```python
変数名 = 値
```
です。右辺が左辺に代入されると理解するのが良いです。

- こんな感じで、複数の変数を取り扱うこともできます：
    ```python
    x = 1
    y = 2
    x + y
    ```
    > ```
    > 3
    > ```
- 変数名はスペースが空いていなければ1文字じゃなくても良いです：
    ```python
    my_name = "Akinori"            # 変数名を複数の単語から構成したいとき、 _ で繋ぎがちです。
    "My name is" + " " + my_name
    ```
    > ```
    > 'My name is Akinori'
    > ```

    </blockquote>

- Python の変数は 数学の変数と似ていますが、変数そのものを扱うというよりは「箱」の中に値が代入できるものと思っておくほうが良いです：
    ```python
    n = 10
    n = n + 1   # 左辺に右辺の値が代入された、と読むと良いです
    n
    ```
    > ```
    > 11
    > ```

## ベクトルのような型と関連する文法（for文とprint）

適当な数値や文字列をひとまとめにすることもできます。
- リスト型 **list**
    `[]` で囲み、 `,` で要素を区切ります。**要素を後で変更可能**
    ```python
    l = [1, 2, "hoge"]
    type(l)
    ```
    > ```
    > list
    > ```

- タプル型 **tuple**
    `()` で囲み、 `,` で要素を区切ります。**要素を後で変更不可能**
    ```python
    t = (1, 2, "hoge")
    type(t)
    ```
    > ```
    > tuple
    > ```

### 要素にアクセスする

リスト、タプル、ともに変数化したのち、`[要素番号]` で中身の値にアクセスすることができます。ただし、**要素番号は0から始まります**：

- 例：
    ```python
    l = [10, 20, 30]
    l[0]
    ```
    > ```
    > 10
    > ```

- リストはこの方法で要素を変更できます：
    ```python
    l[0] = "changed"
    l
    ```
    > ```
    > ['changed', 20, 30]
    > ```

- しかし、タプルは要素を変更することができません：
    ```python
    t = (10, 20, 30)
    t[0] = "changed"
    ```
    > ```
    > Traceback (most recent call last):
    >   File "<stdin>", line 1, in <module>
    > TypeError: 'tuple' object does not support item assignment
    > ```

### 要素を付け足す

リストは **.append(新要素)** とすることで、新しい要素を末尾に加えることができます。

- 例：
    ```python
    l = [1, 2, 3]
    l.append(100)
    l
    ```
    > ```
    > [1, 2, 3, 100]
    > ```

- ただし、タプルには やはり要素を加えられません。
    ```python
    t = (1, 2, 3)
    t.append(100)
    ```
    > ```
    > Traceback (most recent call last):
    >   File "<stdin>", line 1, in <module>
    > AttributeError: 'tuple' object has no attribute 'append'
    > ```

### for文

リストやタプルと関係した重要な制御構文が **for文** です。文法は以下：
```python
for x in リスト:
    # ここでは字下げ（インデント）が必要
    処理(x)
    # ここに書いた `処理(x)` は 
    #     x = リスト[0] 
    #     処理(x)
    #     x = リスト[1]
    #     処理(x)
    #     x = リスト[2]
    #     処理(x)
    #     ...
    #     x = リスト[最後の番号]
    #     処理(x)
    # のように実行されます。 
    # リストはタプルでもOK。
```

- 1から10までの和の計算：
    ```python
    n = 0
    for x in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]:
        n = n + x
    n
    ```
    > ```
    > 55
    > ```

ところで、↑で10まで手打ちするのは面倒です。Pythonでは ループ中では リストやタプルよりも 
```python
for x in range(10):
    ...
```
のような書き方をするのが普通です。`range()` 関数はよく使うのでいくつか注意：
- `range(N)` は `[0, 1, 2, ..., N-1]` のループになります。
- `range(m_min, N)` は `[m_min, m_min+1, ..., N-1]` のループ
- `range(m_min, N, d)` は `[m_min, m_min+d, ..., (N-1)を超えない最大の数]` のループ

例えば、1から10までの和の計算はリストで1から10まで書かなくても、`range()` を使って以下のように書けます：
```python
n = 0
for x in range(1, 10+1): # 1 から 10 まで
    n = n + x
n
```
> ```
> 55
> ```

$\blacksquare$ **練習問題1:** 1から100までの足し算をプログラムで計算させてください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> ```python
> n = 0
> for x in range(100+1):
>     n = n + x
> n
> ```
> > ```
> > 5050
> > ```
> 
> </details>

$\blacksquare$ **練習問題2:** リスト [1,2, ..., 100] を作成してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> その1：
> ```python
> l = []
> for x in range(1, 100+1):
>     l.append(x)
> l
> ```
> > ```
> > [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]
> > ```
> 
> その2：
> 
> もしかしたら
> ```python
> l = range(1, 100+1)
> ```
> と書かれた方がいるかもしれませんが、これは実はリストになりません。（実は `range()` 関数はリストとは別のオブジェクトを生成しているからです。）ただし、`list()`という、引数をリスト化する関数もあるので、これを使うと望みのものが出せます：
> ```python
> l = range(1, 100+1)
> l = list(l)
> l
> ```
> > ```
> > [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]
> > ```
> 
> ですが、あんまりこのような使い方はしないので、解答例1の方がつぶしが効く考え方です。
> 
> </details>

### print() 関数

ところで、for文のループ処理中にどのような計算が行われているか知りたい場合があります。特に書いたプログラムが意図通りに動作しない場合（バグがある場合）は、見えていないところで何かおかしいことがあることがほとんどです。そのような場合、`print()` 関数を使うと良いです。

- 例：
    ```python
    for x in range(5):
        print(x)
    ```
    > ```
    > 0 
    > 1 
    > 2 
    > 3 
    > 4 
    > ```

もう少し表示に意味を持たせたい場合、str型で説明と一緒に表示すると良いかもしれません。その際、format文字列 というのを使うと、変数を表示することができます。

- **format文字列**
    - `f'...{変数}...'` とすると、{変数} の部分が変数の値の文字に置き換わる
    - `f"...{変数}..."` とすると、{変数} の部分が変数の値の文字に置き換わる
 
    例：
    ```python
    for x in range(5):
        print(f"{x}^2 is {x**2}")
    ```
    > ```
    > 0^2 is 0 
    > 1^2 is 1 
    > 2^2 is 4 
    > 3^2 is 9 
    > 4^2 is 16
    > ```

$\blacksquare$ **練習問題3:** 0から4までの足し算をfor文で書き、途中経過を print() で表示してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> 途中経過というのが実装によるとは思いますので、あくまで一つの解答例です。
> ```python
> n = 0
> for x in range(5):
>     n = n + x
>     print(f"The current value is {n}.")
> ```
> > ```
> > The current value is 0. 
> > The current value is 1. 
> > The current value is 3. 
> > The current value is 6. 
> > The current value is 10.
> > ```
> 
> </details>

### ループのループ

ループの内部にループを作ることも可能です：

```python
for x in リスト1:
    # ここでは字下げ（インデント）が必要
    # x のループを表す
    for y in リスト2:
        # ここでも字下げ（インデント）が必要
        # x のループ中の y のループを表す
        処理(x, y)
```

字下げが二段階あることに気をつけてください。forループに限らず **Python では処理の階層（対象）を字下げで表します**（このセクションで一番大事なことです）。

$\blacksquare$ **練習問題4:** 九九を2の段から9の段まで表示してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> ```python
> for x in range(2, 10):
>     for y in range(1, 10):
>         print(f"{x}x{y} = {x*y}")
>     print()
> ```
> > ```
> > 2x1 = 2 
> > 2x2 = 4 
> > 2x3 = 6 
> > ...     
> > 9x9 = 81
> > ```
> 
> </details>

$\blacksquare$ **練習問題5:** ループのループのループはどのように書かれるでしょうか。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> 実際に動くプログラムではありませんが、こんな感じです。
> ```python
> for x in リスト1:
>     # ここでは字下げ（インデント）が必要
>     for y in リスト2:
>         # ここでも字下げ（インデント）が必要
>         for z in リスト3:
>             # ここでも字下げ（インデント）が必要
>             処理(x, y, z)
> ```
> </details>

## 真偽値の型とif文

プログラムでは「もしAの時は処理a、そうでない時は処理b」のような処理をしたいことがあります。そのような処理をする際に使う型が bool です
- 真偽値の型 **bool**
    `True` か `False` しか値がありません。
    ```python
    type(True)
    ```
    > ```
    > bool
    > ```

### 真偽値の演算
真偽値は `or` や `and`、`not` などの演算を適用できます：

- 例：
    ```python
    A = True
    B = False
    A and B
    ```
    > ```
    > False
    > ```
    ```python
    A or B
    ```
    > ```
    > True
    > ```
    ```python
    not A
    ```
    > ```
    > False
    > ```

### 真偽値を返す演算

二つの値（真偽値に限らない）が等しいかどうかは True か False の値を返します。
- `x == y`: `x` と `y` が等しいオブジェクトの時 `True` を、そうでない場合 `False` を返す
- `x != y`: `x` と `y` が等しいオブジェクトの時 `False` を、そうでない場合 `True` を返す
    ```python
    1 == 1
    ```
    > ```
    > True
    > ```
    ```python
    "python" != "python"
    ```
    > ```
    > False
    > ```
- `x > y`: `x` が `y` より大きい値の時、`True` を、そうでない場合 `False` を返す（数学の $>$ に対応）
    - `x >= y`: （↑の $\geq$ バージョン）
    - `x < y`: （小なりバージョン）
    - `x <= y`: （同上）
    ```python
    10 > 1
    ```
    > ```
    > True
    > ```


### if文

「Aの時だけ処理する」のが最も簡単なif文です：
```python
if A: # A は True か False
    # ここでは字下げ（インデント）が必要
    処理
```

- あんまり意味がない例ですが、こういうことです：
    ```python
    if False:
        print("この文は表示されません")
    ```
    > ```
    > 
    > ```

- もう少し意味ありげな例：
    ```python
    x = 3
    y = 9
    if y%x == 0:
        print(f"{y} は {x} で割り切れます。")
    ```
    > ```
    > 9 は 3 で割り切れます。
    > ```
    この `x` や `y` を別の値にすると割り切れる時のみ文章が出ることが確認できるはずです。


「もしAの時は処理a、そうでない時は処理b」をする際は以下のようにします。
```python
if A: # A は True か False
    # ここでは字下げ（インデント）が必要
    処理a
else:
    # ここでも字下げ（インデント）が必要
    処理b
```

- 例：
    ```python
    x = 3
    y = 9
    if y%x == 0:
        print(f"{y} は {x} で割り切れます。")
    else:
        print(f"{y} は {x} で割り切れません！")
    ```
    この `x` や `y` を別の値にすると割り切れる時は上のメッセージが、割り切れないときは下のメッセージが出るはずです。

もう少し細かく条件分岐させたい場合は、else if の略語である `elif` を使います：
```python
if A: # A は True か False
    # ここでは字下げ（インデント）が必要
    処理a
elif B: # B は True か False
    # ここでは字下げ（インデント）が必要
    処理b
elif C: # C は True か False
    # ここでは字下げ（インデント）が必要
    処理c
else:
    # ここでも字下げ（インデント）が必要
    処理d
```
このように書くと上から順に条件分岐処理が実行されます。

$\blacksquare$ **練習問題6:** xが0から10まで変化するforループを書き、xが偶数の時のみ "even" とprint表示してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
>
> ```python
> for x in range(5):
>     if x%2 == 0:
>         print("even")
> ```
> > ```
> > even 
> > even 
> > even 
> > ```
> 
> ただ、これでは望み通りの処理ができているか不明なので、以下のように表示するとより良いです：
> 
> ```python
> for x in range(5):
>     if x%2 == 0:
>         print(f"{x} is even.")
> ```
> > ```
> > 0 is even. 
> > 2 is even. 
> > 4 is even. 
> > ```
> 
> </details>

$\blacksquare$ **練習問題7:** 上の処理に加え、奇数の時は "odd" と表示してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> ```python
> for x in range(5):
>     if x%2 == 0:
>         print("even")
>     else:
>         print("odd")
> ```
> > ```
> > even 
> > odd  
> > even 
> > odd  
> > even 
> > ```
> 
> こちらも、より丁寧には以下のように変数も一緒に表示すると良いですね。
> 
> 
> ```python
> for x in range(5):
>     if x%2 == 0:
>         print(f"{x} is even.")
>     else:
>         print(f"{x} is odd.")
> ```
> > ```
> > 0 is even. 
> > 1 is odd.  
> > 2 is even. 
> > 3 is odd.  
> > 4 is even.
> > ```
> </details>

$\blacksquare$ **練習問題8:** 基本は問題5のような処理で、ただしxが3の時だけ "3" とprint表示してください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> 最初から丁寧バージョンです。
> ```python
> for x in range(5):
>     if x==3:
>         print(f"{x} is 3.")
>     elif x%2 == 0:
>         print(f"{x} is even.")
>     else:
>         print(f"{x} is odd.")
> ```
> > ```
> > 0 is even.
> > 1 is odd. 
> > 2 is even.
> > 3 is 3.   
> > 4 is even.
> > ```
> </details>

### for文 の break 処理

ところで for文は `break` と書くと、ループ途中で処理を止めることができます。

- 例：
    ```python
    for x in range(10):
        break # x = 0 でとまる
    ```
これだけだと何の役に立つか分かりませんが、if文と組み合わせると「ある条件が満たされた場合はループ処理を止める」といった処理が可能です。
- 例：
    ```python
    for x in range(10):
        if x > 3: # これがないと、出力は 9 になる
            break      
    x
    ```
    > ```
    > 4
    > ```

などです。ここでも二段階の字下げが重要なことに注意してください。**Python では処理の階層（対象）を字下げで表します**（大事なことですので、何度でも強調しておきます）。

$\blacksquare$ **練習問題9:** 整数Nが素数かどうかを判定するプログラムを書いてください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> for文と組み合わせて、エラトステネスのふるいを作ることができます：
> ```python
> N = 127
> is_prime = True
> for n in range(2, N):
>     if N%n == 0:
>         is_prime = False
>         divisor = n
>         break
> 
> if is_prime:
>     print(f"{N} is prime.")
> else:
>     print(f"{N} is divisible by {divisor}.")
> ```
> > ```
> > 127 is prime.
> > ```
> </details>

## 関数の定義

このセクションの締めくくりとして、関数定義を説明します。

練習問題9で書いた素数判定は、Nを色々に変えて動かしたいと思いますが、その度に上で書いたようなプログラムを書くのは面倒ですし、何より行数が増えることはバグの温床になります。

というわけで、よく使う処理は関数として定義しておき、それを使うのが普通です。関数定義の文法は以下です：
```python
def 関数名(引数):
    # 字下げ
    処理
    return 出力
```
実は `return` 部分は書かなくても良いです。その場合返り値は `None` という特殊なオブジェクトになります。

- 例：単純に2倍するだけの関数：
    ```python
    def doubled(x):
        return 2*x

    doubled(10)
    ```
    > ```
    > 20
    > ```

こういうのは一見意味がないように見えて、処理を自然言語で説明することができる利点があります。

- もう少し複雑な例として、初めの方に書いた1から和を取る関数を作ってみると：
    ```python
    def sum_to(N): # sum() という関数がデフォルトであるため、名前は sum_to にしています
        n = 0
        for x in range(N+1):
            n = n + x
        return n

    sum_to(100)
    ```
    > ```
    > 5050
    > ```

何度も言うようですが、**字下げの階層が重要です**。
    なお、関数の定義中で `print()` を使うこともできます。これはデバッグに便利です。


$\blacksquare$ **練習問題10:** 入力された自然数が素数の場合 True そうでない場合 False を返す関数を書いてください。
> [!TIP]
> <details>
> <summary>解答例</summary>
> 
> ```python
> def is_prime(N):
>     is_prime = True
>     for n in range(2, N):
>         if N%n == 0:
>             is_prime = False
>             divisor = n
>             break
>     return is_prime
> 
> is_prime(10)
> ```
> > ```
> > False
> > ```
> 
> 他の入力でもやってみましょう：
> 
> ```python
> is_prime(31)
> ```
> > ```
> > True
> > ```
> 
> ちょっと面白い実験：
> 
> ```python
> for N in [31, 331, 3331, 33331, 333331, 3333331, 33333331, 333333331]:
>     print(f"{N} is prime? = {is_prime(N)}")
> ```
> > ```
> > 31 is prime? = True       
> > 331 is prime? = True      
> > 3331 is prime? = True     
> > 33331 is prime? = True    
> > 333331 is prime? = True   
> > 3333331 is prime? = True  
> > 33333331 is prime? = True 
> > 333333331 is prime? = False
> > ```
> </details>

[前のsection](preface.md) | [次のsection](1-2.md)
